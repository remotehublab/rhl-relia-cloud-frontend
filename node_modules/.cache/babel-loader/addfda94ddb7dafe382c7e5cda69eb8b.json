{"ast":null,"code":"import $ from 'jquery';\nimport useScript from './useScript';\nvar average_number = 1;\nvar ZoomInTimeSink = 1;\nvar ZoomOutTimeSink = 1; //var NoiseFactorTimeSink=0;\n//var min_TimeSink_Re=-1;\n//var max_TimeSink_Re=-1;\n\nvar flagTimer = 'pause';\n\nfunction Relia() {}\n\nfunction TimSinkPauseRun() {\n  if (flagTimer == 'pause') {\n    flagTimer = 'run';\n    document.getElementById('PauseRun').value = \"Play\";\n  } else {\n    flagTimer = 'pause';\n    document.getElementById('PauseRun').value = \"Pause\";\n  }\n}\n\nfunction IncAverageCounter(vals) {\n  average_number = average_number + 1;\n}\n\nfunction DecAverageCounter(vals) {\n  average_number = average_number - 1;\n\n  if (average_number < 1) {\n    average_number = 1;\n  }\n}\n\nfunction TimSinkZoomOutClick() {\n  ZoomOutTimeSink = ZoomOutTimeSink + 1; //i'm not very sure about this, but it may work.   \n}\n\nfunction TimSinkZoomInClick() {\n  ZoomInTimeSink = ZoomInTimeSink + 1; //i'm not very sure about this, but it may work.   \n}\n\nfunction TimSinkAutoScaleClick() {\n  ZoomOutTimeSink = 1; //i'm not very sure about this, but it may work.   \n\n  ZoomInTimeSink = 1; //i'm not very sure about this, but it may work.   \n}\n\nexport function ReliaTimeSink(divIdentifier, deviceIdentifier, blockIdentifier) {\n  useScript(\"https://www.gstatic.com/charts/loader.js\");\n  var self = this;\n  self.$div = $(\"#\" + divIdentifier);\n  self.$div.html(\"<div class=\\\"time-chart\\\" style=\\\"width: 900px; height: 500px\\\"></div>\\n\" + \"<div class=\\\"Checkbox_TimeSink_OnOffSignal\\\">\" + \"<input type=\\\"checkbox\\\" class=\\\"checkbox time-sink-grid-checkbox\\\" checked> Grid<br>\" + \"<input type=\\\"checkbox\\\" class=\\\"checkbox time-sink-real-checkbox\\\" checked> Real<br>\" + \"<input type=\\\"checkbox\\\" class=\\\"checkbox time-sink-imag-checkbox\\\" checked> Imag<br>\" + \"<br>\" + \"<input type=\\\"submit\\\" name=\\\"checkout\\\" class=\\\"button\\\" value=\\\"Zoom In\\\" onClick=\\\"TimSinkZoomInClick()\\\"> <br>\" + \"<input type=\\\"submit\\\" name=\\\"checkout\\\" class=\\\"button\\\" value=\\\"Zoom Out\\\" onClick=\\\"TimSinkZoomOutClick()\\\"> <br>\" + \"<input type=\\\"submit\\\" name=\\\"checkout\\\" class=\\\"button\\\" value=\\\"Zoom AutoScale\\\" onClick=\\\"TimSinkAutoScaleClick()\\\"> <br>\" + \"<br>\" + \"<p>Add Noise</p>\" + //\"<input type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" value=\\\"1\\\" onchange=\\\"TimeSink_NoiseSlide(this.value)\\\" <br>\" +\n  \"<input id=\\\"TimeSinkNoiseSlider\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" value=\\\"90\\\"> <p id=\\\"TimeSinkNoiseSliderValue\\\" value=\\\"1\\\"></p> <br>\" + \"<br>\" + //\"<input type=\\\"button\\\" id=\\\"PauseRun\\\" value=\\\"Pause\\\" onClick=\\\"TimSinkPauseRun()\\\" <br>\" +\n  //\"<input type=\\\"button\\\" id=\\\"myButton1\\\" onClick=\\\"if(this.value=='Run') { this.value='Pause'; } else { this.value='Run'; }\\\" value=\\\"Pause\\\" <br>\" +\n  //\"<input type=\\\"button\\\" id=\\\"myButton1\\\" onClick=RunPausePressed(this) <br>\" +\n  \"<form>\" + \"  <select class=\\\"TimeSink_NumberOfPoints2Plot\\\">\" + \"    <option value=\\\"1024\\\"selected=\\\"selected\\\">1024 points</option>\" + \"    <option value=\\\"64\\\" >64 points</option>\" + \"    <option value=\\\"128\\\">128 points</option>\" + \"    <option value=\\\"256\\\">256 points</option>\" + \"    <option value=\\\"512\\\">512 points</option>\" + \"    <option value=\\\"2048\\\">2048 points</option>\" + \"    <option value=\\\"4096\\\">4096 points</option>\" + \"  </select>\" + \"</form>\" + \"</div>\");\n  var $constChartDiv = self.$div.find(\".time-chart\");\n  self.$gridCheckbox = self.$div.find(\".time-sink-grid-checkbox\");\n  self.$timesinkrealCheckbox = self.$div.find(\".time-sink-real-checkbox\");\n  self.$timesinkimagCheckbox = self.$div.find(\".time-sink-imag-checkbox\");\n  self.$nop2plot = self.$div.find(\".TimeSink_NumberOfPoints2Plot\");\n  self.$max_TimeSink_Re = 1;\n  self.$min_TimeSink_Re = 1;\n  self.$TimeSinkNoiseSlider = document.getElementById(\"TimeSinkNoiseSlider\");\n  self.$TimeSinkNoiseSliderValue = document.getElementById(\"TimeSinkNoiseSliderValue\");\n\n  var $ChangeTimeSinkNoiseSlider = function $ChangeTimeSinkNoiseSlider() {\n    self.$TimeSinkNoiseSliderValue.textContent = self.$TimeSinkNoiseSlider.value;\n    self.$NoiseFactorTimeSink = self.$TimeSinkNoiseSlider.value * (self.$max_TimeSink_Re - self.$min_TimeSink_Re) / 100;\n  };\n\n  $ChangeTimeSinkNoiseSlider();\n  self.$TimeSinkNoiseSlider.onchange = $ChangeTimeSinkNoiseSlider;\n  self.$flagPauseRun = \"Run\";\n  self.$TimeSinkPauseButton = document.getElementById(\"myButton1\");\n\n  function RunPausePressed(el) {\n    if (el.value == 'Pause') self.$flagPauseRun = 'Run';\n    if (el.value == 'Run') self.$flagPauseRun = 'Pause';\n  }\n\n  this.chart = new google.visualization.LineChart($constChartDiv[0]);\n  this.url = window.API_BASE_URL + \"data/current/\" + deviceIdentifier + \"/blocks/\" + blockIdentifier;\n\n  this.redraw = function () {\n    var GridColor = '#808080';\n\n    if (self.$gridCheckbox.is(':checked')) {\n      GridColor = '#808080';\n    } else {\n      GridColor = '#ffffff';\n    }\n    /*var ZoomIn_factor;\n        if($(\"#time-sink-grid-checkbox\").is(':checked'))  {\n          GridColor = '#808080'; }\n        else { \n          GridColor = '#ffffff'; }/**/\n\n\n    this.options = {\n      title: 'Time',\n      curveType: 'function',\n      legend: {\n        position: 'bottom'\n      },\n      hAxis: {\n        title: 'Time (milliseconds)',\n        gridlines: {\n          color: GridColor\n        }\n      },\n      vAxis: {\n        viewWindow: {\n          min: self.$min_TimeSink_Re * (ZoomOutTimeSink / ZoomInTimeSink),\n          max: self.$max_TimeSink_Re * (ZoomOutTimeSink / ZoomInTimeSink)\n        },\n        title: 'Amplitude',\n        gridlines: {\n          color: GridColor\n        }\n      },\n      explorer: {\n        actions: ['dragToZoom', 'rightClickToReset'],\n        axis: 'horizontal',\n        keepInBounds: true,\n        maxZoomIn: 4.0\n      },\n      colors: ['#e2431e', '#000000']\n    };\n    $.get(self.url).done(function (data) {\n      setTimeout(function () {\n        self.redraw();\n      });\n\n      if (!data.success) {\n        console.log(\"Error: \" + data.message);\n        return;\n      }\n\n      if (data.data == null) {\n        console.log(\"No data\");\n        return;\n      }\n\n      var params = data.data.params;\n      console.log(data.data.block_type);\n      console.log(data.data.type);\n      console.log(params);\n      console.log(data.data.data);\n      var realData = data.data.data.streams['0']['real'];\n      var imagData = data.data.data.streams['0']['imag'];\n      $.each(realData, function (pos, value) {\n        realData[pos] = parseFloat(value);\n      });\n      $.each(imagData, function (pos, value) {\n        imagData[pos] = parseFloat(value);\n      });\n      var enableReal;\n\n      if (self.$timesinkrealCheckbox.is(':checked')) {\n        enableReal = true;\n      } else {\n        enableReal = false;\n        realData = new Array(realData.length).fill(null);\n      }\n\n      var enableImag;\n\n      if (self.$timesinkimagCheckbox.is(':checked')) {\n        enableImag = true;\n      } else {\n        enableImag = false; //imagData=Array(realData.length).fill(null);\n      }\n\n      if (!enableReal && !enableImag) {\n        console.log(\"Error: activate real or imag\");\n        return;\n      }\n\n      var columns = [\"Point\"];\n      self.options['series'] = {};\n      var counter = 0;\n\n      if (enableReal) {\n        columns.push(\"Real\");\n        self.options.series[counter] = '#e2431e';\n        counter++;\n      }\n\n      if (enableImag) {\n        columns.push(\"Imag\");\n        self.options.series[counter] = '#1c91c0';\n      }\n\n      console.log(self.options);\n      var formattedData = [columns];\n      var Number2plot = self.$nop2plot.val();\n      var randomArr = Array.from({\n        length: Number2plot\n      }, function () {\n        return Math.random() * 2 - 1;\n      });\n      var timePerSample = 1000.0 / params.srate; // in milliseconds\n\n      self.$min_TimeSink_Re = realData[0];\n      self.$max_TimeSink_Re = realData[0];\n      self.$min_TimeSink_Im = imagData[0];\n      self.$max_TimeSink_Im = imagData[0];\n\n      for (var pos = 0; pos < Number2plot; ++pos) {\n        var currentRow = [pos * timePerSample];\n\n        if (enableReal) {\n          currentRow.push(realData[pos] + self.$NoiseFactorTimeSink * randomArr[pos]);\n\n          if (realData[pos] < self.$min_TimeSink_Re) {\n            self.$min_TimeSink_Re = realData[pos];\n          }\n\n          if (realData[pos] > self.$max_TimeSink_Re) {\n            self.$max_TimeSink_Re = realData[pos];\n          }\n        }\n\n        if (enableImag) {\n          currentRow.push(imagData[pos] + self.$NoiseFactorTimeSink * randomArr[pos]);\n\n          if (imagData[pos] < self.$min_TimeSink_Im) {\n            self.$min_TimeSink_Im = imagData[pos];\n          }\n\n          if (imagData[pos] > self.$max_TimeSink_Im) {\n            self.$max_TimeSink_Im = imagData[pos];\n          }\n        }\n\n        formattedData.push(currentRow);\n      }\n\n      var dataTable = google.visualization.arrayToDataTable(formattedData);\n\n      if (self.$flagPauseRun == 'Run') {\n        self.chart.draw(dataTable, self.options);\n      }\n    });\n  };\n}\nexport function ReliaConstellationSink(divIdentifier, deviceIdentifier, blockIdentifier) {\n  var self = this;\n  self.$div = $(\"#\" + divIdentifier);\n  self.$div.html(\"<div class=\\\"const-chart\\\" style=\\\"width: 900px; height: 500px\\\"></div>\\n\" + \"<div class=\\\"Checkbox_ConstSink_OnOffSignal\\\">\" + \"<input type=\\\"checkbox\\\" class=\\\"checkbox const-sink-grid-checkbox\\\" checked> Grid<br>\" + \"<br>\" + \"<form>\" + \"  <select class=\\\"ConstSink_NumberOfPoints2Plot\\\">\" + \"    <option value=\\\"16\\\"selected=\\\"selected\\\">16 points</option>\" + \"    <option value=\\\"32\\\" >32 points</option>\" + \"    <option value=\\\"64\\\">64 points</option>\" + \"    <option value=\\\"128\\\">128 points</option>\" + \"    <option value=\\\"256\\\">256 points</option>\" + \"    <option value=\\\"512\\\">512 points</option>\" + \"    <option value=\\\"1024\\\">1024 points</option>\" + \"  </select>\" + \"</form>\" + \"</div>\");\n  var $constChartDiv = self.$div.find(\".const-chart\");\n  self.$gridCheckbox = self.$div.find(\".const-sink-grid-checkbox\");\n  self.$nop2plot = self.$div.find(\".ConstSink_NumberOfPoints2Plot\");\n  this.chart = new google.visualization.ScatterChart($constChartDiv[0]);\n  this.url = window.API_BASE_URL + \"data/current/\" + deviceIdentifier + \"/blocks/\" + blockIdentifier;\n\n  this.redraw = function () {\n    var GridColor = '#808080';\n\n    if (self.$gridCheckbox.is(':checked')) {\n      GridColor = '#808080';\n    } else {\n      GridColor = '#ffffff';\n    }\n\n    var ZoomIn_factor;\n\n    if (self.$gridCheckbox.is(':checked')) {\n      GridColor = '#808080';\n    } else {\n      GridColor = '#ffffff';\n    }\n\n    this.options = {\n      title: 'Constellation Plot',\n      pointSize: 3,\n      curveType: 'function',\n      legend: {\n        position: 'bottom'\n      },\n      hAxis: {\n        title: 'In - phase',\n        gridlines: {\n          color: GridColor\n        }\n      },\n      vAxis: {\n        title: 'Quadrature',\n        gridlines: {\n          color: GridColor\n        }\n      },\n      explorer: {\n        actions: ['dragToZoom', 'rightClickToReset'],\n        axis: 'horizontal',\n        keepInBounds: true,\n        maxZoomIn: 4.0\n      }\n    };\n    $.get(self.url).done(function (data) {\n      setTimeout(function () {\n        self.redraw();\n      });\n\n      if (!data.success) {\n        console.log(\"Error: \" + data.message);\n        return;\n      }\n\n      if (data.data == null) {\n        console.log(\"No data\");\n        return;\n      }\n\n      var params = data.data.params;\n      console.log(data.data.block_type);\n      console.log(data.data.type);\n      console.log(params);\n      console.log(data.data.data);\n      var realData = data.data.data.streams['0']['real'];\n      var imagData = data.data.data.streams['0']['imag'];\n      $.each(realData, function (pos, value) {\n        realData[pos] = parseFloat(value);\n      });\n      $.each(imagData, function (pos, value) {\n        imagData[pos] = parseFloat(value);\n      });\n      var formattedData = [[\"\", \"\"]];\n      var Number2plot = self.$nop2plot.val();\n\n      for (var pos = 0; pos < Number2plot; ++pos) {\n        formattedData.push([realData[pos], imagData[pos]]);\n      }\n\n      var dataTable = google.visualization.arrayToDataTable(formattedData);\n      self.chart.draw(dataTable, self.options);\n    });\n  };\n}\nexport function ReliaVectorSink(divIdentifier, deviceIdentifier, blockIdentifier) {\n  var self = this;\n  var avg_counter = 1; //let average_number=1;\n\n  var avg_data = Array(1024).fill(0);\n  self.$div = $(\"#\" + divIdentifier);\n  self.$div.html(\"<div class=\\\"const-chart\\\" style=\\\"width: 900px; height: 500px\\\"></div>\\n\" + \"<input type=\\\"button\\\" id=\\\"Inc\\\" onClick=IncAverageCounter(this) value=\\\"average +\\\"<br>\" + \"<input type=\\\"button\\\" id=\\\"Inc\\\" onClick=DecAverageCounter(this) value=\\\"average -\\\"<br>\" + \"</div>\");\n  var $constChartDiv = self.$div.find(\".const-chart\");\n  this.chart = new google.visualization.LineChart($constChartDiv[0]);\n  this.options = {\n    title: 'Power Spectra',\n    curveType: 'function',\n    legend: {\n      position: 'bottom'\n    },\n    hAxis: {\n      title: 'KHz'\n    },\n    vAxis: {\n      title: 'dB'\n    }\n  };\n  this.url = window.API_BASE_URL + \"data/current/\" + deviceIdentifier + \"/blocks/\" + blockIdentifier;\n\n  this.redraw = function () {\n    $.get(self.url).done(function (data) {\n      setTimeout(function () {\n        self.redraw();\n      });\n\n      if (!data.success) {\n        console.log(\"Error: \" + data.message);\n        return;\n      }\n\n      if (data.data == null) {\n        console.log(\"No data\");\n        return;\n      }\n\n      var params = data.data.params;\n      /*console.log(data.data.block_type);\n      console.log(data.data.type);\n      console.log(params);\n      console.log(avg_counter);/**/\n\n      var realData = data.data.data.streams[0];\n\n      if (avg_counter < average_number) {\n        avg_counter = avg_counter + 1;\n\n        for (var k = 0; k < 1024; ++k) {\n          avg_data[k] += parseFloat(realData[k]);\n        }\n      } else {\n        console.log(average_number);\n        avg_counter = 0;\n        var formattedData = [[\"Point\", \"Frequency\"]];\n\n        for (var pos = 0; pos < realData.length; ++pos) {\n          formattedData.push([pos, avg_data[pos]]);\n        }\n\n        avg_data = Array(1024).fill(0);\n        var dataTable = google.visualization.arrayToDataTable(formattedData);\n        self.chart.draw(dataTable, self.options);\n      }\n    });\n  };\n}","map":{"version":3,"names":["$","useScript","average_number","ZoomInTimeSink","ZoomOutTimeSink","flagTimer","Relia","TimSinkPauseRun","document","getElementById","value","IncAverageCounter","vals","DecAverageCounter","TimSinkZoomOutClick","TimSinkZoomInClick","TimSinkAutoScaleClick","ReliaTimeSink","divIdentifier","deviceIdentifier","blockIdentifier","self","$div","html","$constChartDiv","find","$gridCheckbox","$timesinkrealCheckbox","$timesinkimagCheckbox","$nop2plot","$max_TimeSink_Re","$min_TimeSink_Re","$TimeSinkNoiseSlider","$TimeSinkNoiseSliderValue","$ChangeTimeSinkNoiseSlider","textContent","$NoiseFactorTimeSink","onchange","$flagPauseRun","$TimeSinkPauseButton","RunPausePressed","el","chart","google","visualization","LineChart","url","window","API_BASE_URL","redraw","GridColor","is","options","title","curveType","legend","position","hAxis","gridlines","color","vAxis","viewWindow","min","max","explorer","actions","axis","keepInBounds","maxZoomIn","colors","get","done","data","setTimeout","success","console","log","message","params","block_type","type","realData","streams","imagData","each","pos","parseFloat","enableReal","Array","length","fill","enableImag","columns","counter","push","series","formattedData","Number2plot","val","randomArr","from","Math","random","timePerSample","srate","$min_TimeSink_Im","$max_TimeSink_Im","currentRow","dataTable","arrayToDataTable","draw","ReliaConstellationSink","ScatterChart","ZoomIn_factor","pointSize","ReliaVectorSink","avg_counter","avg_data","k"],"sources":["C:/Users/Brian/Documents/relia-react/src/relia.js"],"sourcesContent":["import $ from 'jquery';\nimport useScript from './useScript';\n\nvar average_number=1;\nvar ZoomInTimeSink=1;\nvar ZoomOutTimeSink=1;\n//var NoiseFactorTimeSink=0;\n//var min_TimeSink_Re=-1;\n//var max_TimeSink_Re=-1;\nvar flagTimer='pause';\n\nfunction Relia() {\n\n}\n\nfunction TimSinkPauseRun() { \n  if(flagTimer=='pause')\n  {\n    flagTimer='run';\n    document.getElementById('PauseRun').value=\"Play\";\n  }\n  else\n  {\n    flagTimer='pause';\n    document.getElementById('PauseRun').value=\"Pause\";\n  }\n  \n}\n\nfunction IncAverageCounter(vals) {\n  average_number=average_number+1;\n}\n\t\nfunction DecAverageCounter(vals) {\n  average_number=average_number-1;\n  if (average_number<1){\n    average_number=1;\n  }\n}\n\t\nfunction TimSinkZoomOutClick() {\n  ZoomOutTimeSink=ZoomOutTimeSink+1 //i'm not very sure about this, but it may work.   \n}  \n\nfunction TimSinkZoomInClick() {\n  ZoomInTimeSink=ZoomInTimeSink+1 //i'm not very sure about this, but it may work.   \n}  \n\nfunction TimSinkAutoScaleClick() {\n  ZoomOutTimeSink=1 //i'm not very sure about this, but it may work.   \n  ZoomInTimeSink=1 //i'm not very sure about this, but it may work.   \n}  \n\nexport function ReliaTimeSink (divIdentifier, deviceIdentifier, blockIdentifier) {\n  useScript(\"https://www.gstatic.com/charts/loader.js\");\n  var self = this;\n  self.$div = $(\"#\" + divIdentifier);\n  self.$div.html(\n    \"<div class=\\\"time-chart\\\" style=\\\"width: 900px; height: 500px\\\"></div>\\n\" +\n    \"<div class=\\\"Checkbox_TimeSink_OnOffSignal\\\">\" +\n    \"<input type=\\\"checkbox\\\" class=\\\"checkbox time-sink-grid-checkbox\\\" checked> Grid<br>\" +\n    \"<input type=\\\"checkbox\\\" class=\\\"checkbox time-sink-real-checkbox\\\" checked> Real<br>\" +\n    \"<input type=\\\"checkbox\\\" class=\\\"checkbox time-sink-imag-checkbox\\\" checked> Imag<br>\" +\n    \"<br>\" + \n\n    \"<input type=\\\"submit\\\" name=\\\"checkout\\\" class=\\\"button\\\" value=\\\"Zoom In\\\" onClick=\\\"TimSinkZoomInClick()\\\"> <br>\" +\n    \"<input type=\\\"submit\\\" name=\\\"checkout\\\" class=\\\"button\\\" value=\\\"Zoom Out\\\" onClick=\\\"TimSinkZoomOutClick()\\\"> <br>\" +\n    \"<input type=\\\"submit\\\" name=\\\"checkout\\\" class=\\\"button\\\" value=\\\"Zoom AutoScale\\\" onClick=\\\"TimSinkAutoScaleClick()\\\"> <br>\" +\n    \"<br>\" + \n    \"<p>Add Noise</p>\" +\n    //\"<input type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" value=\\\"1\\\" onchange=\\\"TimeSink_NoiseSlide(this.value)\\\" <br>\" +\n    \"<input id=\\\"TimeSinkNoiseSlider\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" value=\\\"90\\\"> <p id=\\\"TimeSinkNoiseSliderValue\\\" value=\\\"1\\\"></p> <br>\" +\n    \"<br>\" + \n    //\"<input type=\\\"button\\\" id=\\\"PauseRun\\\" value=\\\"Pause\\\" onClick=\\\"TimSinkPauseRun()\\\" <br>\" +\n    //\"<input type=\\\"button\\\" id=\\\"myButton1\\\" onClick=\\\"if(this.value=='Run') { this.value='Pause'; } else { this.value='Run'; }\\\" value=\\\"Pause\\\" <br>\" +\n    //\"<input type=\\\"button\\\" id=\\\"myButton1\\\" onClick=RunPausePressed(this) <br>\" +\n\t\t\n    \"<form>\" +\n    \"  <select class=\\\"TimeSink_NumberOfPoints2Plot\\\">\" + \n    \"    <option value=\\\"1024\\\"selected=\\\"selected\\\">1024 points</option>\" + \n    \"    <option value=\\\"64\\\" >64 points</option>\" + \n    \"    <option value=\\\"128\\\">128 points</option>\" + \n    \"    <option value=\\\"256\\\">256 points</option>\" + \n    \"    <option value=\\\"512\\\">512 points</option>\" + \n    \"    <option value=\\\"2048\\\">2048 points</option>\" + \n    \"    <option value=\\\"4096\\\">4096 points</option>\" + \n    \"  </select>\" + \n    \"</form>\" +\n    \"</div>\"\n  );\n\t\n  var $constChartDiv = self.$div.find(\".time-chart\");\n  self.$gridCheckbox = self.$div.find(\".time-sink-grid-checkbox\");\n  self.$timesinkrealCheckbox = self.$div.find(\".time-sink-real-checkbox\");\n  self.$timesinkimagCheckbox = self.$div.find(\".time-sink-imag-checkbox\");\n  self.$nop2plot = self.$div.find(\".TimeSink_NumberOfPoints2Plot\");\n\t\n  self.$max_TimeSink_Re=1;\n  self.$min_TimeSink_Re=1;\n\t\n  self.$TimeSinkNoiseSlider = document.getElementById(\"TimeSinkNoiseSlider\");\n  self.$TimeSinkNoiseSliderValue = document.getElementById(\"TimeSinkNoiseSliderValue\");\n\n  let $ChangeTimeSinkNoiseSlider = () => {\n    self.$TimeSinkNoiseSliderValue.textContent = self.$TimeSinkNoiseSlider.value;\n    self.$NoiseFactorTimeSink=self.$TimeSinkNoiseSlider.value*(self.$max_TimeSink_Re-self.$min_TimeSink_Re)/100;\n  }\n  $ChangeTimeSinkNoiseSlider();\n\n  self.$TimeSinkNoiseSlider.onchange = $ChangeTimeSinkNoiseSlider;\t\n  self.$flagPauseRun=\"Run\";\n\n  self.$TimeSinkPauseButton = document.getElementById(\"myButton1\");\t\n\n  function RunPausePressed(el){\n    if (el.value=='Pause') self.$flagPauseRun='Run';\n    if (el.value=='Run') self.$flagPauseRun='Pause';\n  }\n\t\n  this.chart = new google.visualization.LineChart($constChartDiv[0]);\n\n  this.url = window.API_BASE_URL + \"data/current/\" + deviceIdentifier + \"/blocks/\" + blockIdentifier;\n\n  this.redraw = function() {\n\n  var GridColor='#808080';\n    if(self.$gridCheckbox.is(':checked'))  {\n      GridColor = '#808080'; }\n    else { \n      GridColor = '#ffffff'; }\n        \t\t\n/*var ZoomIn_factor;\n    if($(\"#time-sink-grid-checkbox\").is(':checked'))  {\n      GridColor = '#808080'; }\n    else { \n      GridColor = '#ffffff'; }/**/\t\n\n  this.options = {\n    title: 'Time',\n    curveType: 'function',\n    legend: { position: 'bottom' },\n    hAxis: {\n      title: 'Time (milliseconds)',\n      gridlines: {\n      color: GridColor,\n      }\n    },\n    vAxis: {\n      viewWindow:{min:self.$min_TimeSink_Re*(ZoomOutTimeSink/ZoomInTimeSink), max:self.$max_TimeSink_Re*(ZoomOutTimeSink/ZoomInTimeSink)},\n      title: 'Amplitude',\n      gridlines: {\n        color: GridColor,\n      }\n    },\n    explorer: {\n      actions: ['dragToZoom', 'rightClickToReset'],\n      axis: 'horizontal',\n      keepInBounds: true,\n      maxZoomIn: 4.0,\n    },\n    colors: ['#e2431e', '#000000'],\n  };\n\t\n\t\n  $.get(self.url).done(function (data) {\n    setTimeout(function () {\n      self.redraw();\n    });\n\n    if (!data.success) {\n      console.log(\"Error: \" + data.message);\n      return;\n    }\n\n    if (data.data == null) {\n      console.log(\"No data\");\n      return;\n    }\n\n    var params = data.data.params;\n\n    console.log(data.data.block_type);\n    console.log(data.data.type);\n    console.log(params);\n    console.log(data.data.data);\n\n    var realData = data.data.data.streams['0']['real'];\n\t\t\t\n    var imagData = data.data.data.streams['0']['imag'];\n    $.each(realData, function (pos, value) {\n      realData[pos] = parseFloat(value);\n    });\n    $.each(imagData, function (pos, value) {\n      imagData[pos] = parseFloat(value);\n    });\n\n    var enableReal;\n    if(self.$timesinkrealCheckbox.is(':checked'))  {\n      enableReal = true;\n    } else { \n      enableReal = false; \n      realData= new Array(realData.length).fill(null);\n    }\n        \t\t\n    var enableImag;\n    if(self.$timesinkimagCheckbox.is(':checked'))  {\n      enableImag = true;\n    } else { \n      enableImag = false; \n      //imagData=Array(realData.length).fill(null);\n    }\n    if (!enableReal && !enableImag) {\n      console.log(\"Error: activate real or imag\");\n      return;\n    }\n        \t\t\n    var columns = [\"Point\"];\n    self.options['series'] = {};\n\n    var counter = 0;\n\n    if (enableReal) {\n      columns.push(\"Real\");\n      self.options.series[counter] = '#e2431e';\n      counter++;\n    }\t\n    if (enableImag) {\n      columns.push(\"Imag\");\n      self.options.series[counter] = '#1c91c0';\n    }\n\n    console.log(self.options);\n\n    var formattedData = [ columns ];\n\t\t\t\n    var Number2plot = self.$nop2plot.val();\n    var randomArr = Array.from({length: Number2plot}, () => Math.random()*2-1);\n\n    var timePerSample = 1000.0 / params.srate; // in milliseconds\n\n    self.$min_TimeSink_Re=realData[0];\n    self.$max_TimeSink_Re=realData[0];\n    self.$min_TimeSink_Im=imagData[0];\n    self.$max_TimeSink_Im=imagData[0];\n\t\t\t\n    for (var pos = 0; pos < Number2plot; ++pos) {\n      var currentRow = [pos * timePerSample];\n      if (enableReal) {\n        currentRow.push(realData[pos]+self.$NoiseFactorTimeSink*randomArr[pos]);\n        if (realData[pos] <self.$min_TimeSink_Re) {\n          self.$min_TimeSink_Re=realData[pos]; \n        }\n        if (realData[pos] >self.$max_TimeSink_Re) {\n          self.$max_TimeSink_Re=realData[pos];\n        }\n      }\n      if (enableImag) {\n        currentRow.push(imagData[pos]+self.$NoiseFactorTimeSink*randomArr[pos]);\n\tif(imagData[pos] <self.$min_TimeSink_Im) {\n\t  self.$min_TimeSink_Im=imagData[pos]; \n        }\n\tif(imagData[pos] >self.$max_TimeSink_Im) {\n\t  self.$max_TimeSink_Im=imagData[pos] ;\n        }\n      }\n      formattedData.push(currentRow);\n    }\n\n    var dataTable = google.visualization.arrayToDataTable(formattedData);\n    if (self.$flagPauseRun=='Run') {\n      self.chart.draw(dataTable, self.options);\n    }\n  });\n  };\n}\n\nexport function ReliaConstellationSink (divIdentifier, deviceIdentifier, blockIdentifier) {\n  var self = this;\n\n  self.$div = $(\"#\" + divIdentifier);\n\n  self.$div.html(\n    \"<div class=\\\"const-chart\\\" style=\\\"width: 900px; height: 500px\\\"></div>\\n\" +\n    \"<div class=\\\"Checkbox_ConstSink_OnOffSignal\\\">\" +\n    \"<input type=\\\"checkbox\\\" class=\\\"checkbox const-sink-grid-checkbox\\\" checked> Grid<br>\" +\n    \"<br>\" + \n    \"<form>\" +\n    \"  <select class=\\\"ConstSink_NumberOfPoints2Plot\\\">\" + \n    \"    <option value=\\\"16\\\"selected=\\\"selected\\\">16 points</option>\" + \n    \"    <option value=\\\"32\\\" >32 points</option>\" + \n    \"    <option value=\\\"64\\\">64 points</option>\" + \n    \"    <option value=\\\"128\\\">128 points</option>\" + \n    \"    <option value=\\\"256\\\">256 points</option>\" + \n    \"    <option value=\\\"512\\\">512 points</option>\" + \n    \"    <option value=\\\"1024\\\">1024 points</option>\" + \n    \"  </select>\" + \n    \"</form>\" +\n    \"</div>\"\n  );\n\n  var $constChartDiv = self.$div.find(\".const-chart\");\n  self.$gridCheckbox = self.$div.find(\".const-sink-grid-checkbox\");\n  self.$nop2plot = self.$div.find(\".ConstSink_NumberOfPoints2Plot\");\n\n  this.chart = new google.visualization.ScatterChart($constChartDiv[0]);\n\n  this.url = window.API_BASE_URL + \"data/current/\" + deviceIdentifier + \"/blocks/\" + blockIdentifier;\n\n  this.redraw = function() {\n\t\n  var GridColor='#808080';\n  if(self.$gridCheckbox.is(':checked'))  {\n    GridColor = '#808080';\n  } else { \n    GridColor = '#ffffff';\n  }\n        \t\t\n  var ZoomIn_factor;\n  if(self.$gridCheckbox.is(':checked'))  {\n    GridColor = '#808080';\n  } else { \n    GridColor = '#ffffff';\n  }\n        \t\t\n  this.options = {\n    title: 'Constellation Plot',\n    pointSize: 3,\n    curveType: 'function',\n    legend: { position: 'bottom' },\n    hAxis: {\n      title: 'In - phase',\n      gridlines: {\n        color: GridColor,\n      }\n    },\n    vAxis: {\n      title: 'Quadrature',\n      gridlines: {\n        color: GridColor,\n      }\n    },\n    explorer: {\n      actions: ['dragToZoom', 'rightClickToReset'],\n      axis: 'horizontal',\n      keepInBounds: true,\n      maxZoomIn: 4.0,\n    },\n  };\n\t\n  $.get(self.url).done(function (data) {\n    setTimeout(function () {\n      self.redraw();\n    });\n\n    if (!data.success) {\n      console.log(\"Error: \" + data.message);\n      return;\n    }\n\n    if (data.data == null) {\n      console.log(\"No data\");\n      return;\n    }\n\n    var params = data.data.params;\n\n    console.log(data.data.block_type);\n    console.log(data.data.type);\n    console.log(params);\n    console.log(data.data.data);\n\n    var realData = data.data.data.streams['0']['real'];\n    var imagData = data.data.data.streams['0']['imag'];\n    $.each(realData, function (pos, value) {\n      realData[pos] = parseFloat(value);\n    });\n    $.each(imagData, function (pos, value) {\n      imagData[pos] = parseFloat(value);\n    });\n\n    var formattedData = [ [\"\", \"\"] ];\n    var Number2plot = self.$nop2plot.val();\n\n    for (var pos = 0; pos < Number2plot; ++pos) {\n      formattedData.push([ realData[pos], imagData[pos]]);\n    }\n\n    var dataTable = google.visualization.arrayToDataTable(formattedData);\n    self.chart.draw(dataTable, self.options);\n  });\n  };\n}\n\nexport function ReliaVectorSink (divIdentifier, deviceIdentifier, blockIdentifier) {\n  var self = this;\n  var avg_counter=1;\n  //let average_number=1;\n  var avg_data=Array(1024).fill(0);\n\n  self.$div = $(\"#\" + divIdentifier);\n\n  self.$div.html(\n    \"<div class=\\\"const-chart\\\" style=\\\"width: 900px; height: 500px\\\"></div>\\n\" +\n    \"<input type=\\\"button\\\" id=\\\"Inc\\\" onClick=IncAverageCounter(this) value=\\\"average +\\\"<br>\" +\n    \"<input type=\\\"button\\\" id=\\\"Inc\\\" onClick=DecAverageCounter(this) value=\\\"average -\\\"<br>\" +\n    \"</div>\"\n  );\n\n  var $constChartDiv = self.$div.find(\".const-chart\");\n\n  this.chart = new google.visualization.LineChart($constChartDiv[0]);\n  this.options = {\n    title: 'Power Spectra',\n    curveType: 'function',\n    legend: { position: 'bottom' },\n    hAxis: {\n      title: 'KHz'\n    },\n    vAxis: {\n      title: 'dB',\n    }\n  };\n\n  this.url = window.API_BASE_URL + \"data/current/\" + deviceIdentifier + \"/blocks/\" + blockIdentifier;\n\n  this.redraw = function() {\n\n  $.get(self.url).done(function (data) {\n    setTimeout(function () {\n      self.redraw();\n    });\n\n    if (!data.success) {\n      console.log(\"Error: \" + data.message);\n      return;\n    }\n\n    if (data.data == null) {\n      console.log(\"No data\");\n      return;\n    }\n\n    var params = data.data.params;\n\n    /*console.log(data.data.block_type);\n    console.log(data.data.type);\n    console.log(params);\n    console.log(avg_counter);/**/\n\n    var realData = data.data.data.streams[0];\n\t\t\t\n    if (avg_counter<average_number) {\n      avg_counter=avg_counter+1;\n      for (var k=0; k<1024;++k) {\n        avg_data[k]+=parseFloat(realData[k]);\n      }\n    } else {\n      console.log(average_number);\t\t\t\n      avg_counter=0;\n      var formattedData = [ [\"Point\", \"Frequency\"] ];\n\n      for (var pos = 0; pos < realData.length; ++pos) {\n        formattedData.push([ pos, avg_data[pos]]);\n      }\n      avg_data=Array(1024).fill(0);\n\n      var dataTable = google.visualization.arrayToDataTable(formattedData);\n      self.chart.draw(dataTable, self.options);\n    }\n  });\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}